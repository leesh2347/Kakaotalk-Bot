sudo apt update
sudo apt install linux-modules-extra-$(uname -r)
sudo modprobe binder_linux devices="binder,hwbinder,vndbinder"

# 로드 확인 (아래 명령어로 목록에 binder가 나오면 성공입니다)
lsmod | grep binder

sudo nano docker-compose.yml

version: '3'
services:
  android:
    image: redroid/redroid:13.0.0-latest # 최신 안드로이드 13 버전 (14 지원 여부 확인 가능)
    container_name: android_container
    privileged: true
    volumes:
      - ./data:/data
    ports:
      - "5555:5555" # ADB 포트 포워딩
    restart: always # 서버 재부팅 시 자동 실행 핵심 옵션
    command:
      - androidboot.redroid_width=1080
      - androidboot.redroid_height=1920
      - androidboot.redroid_dpi=480
      - androidboot.redroid_gpu_mode=guest # GPU 가속 필요 시 host로 변경 가능
      - androidboot.use_memfd=1  # <--- ashmem 대신 memfd 사용

# 기존에 잘못 들어갔을 수 있는 ashmem 제거 후 binder만 등록
sudo sed -i '/ashmem_linux/d' /etc/modules
echo "binder_linux" | sudo tee -a /etc/modules

# binder 설정 파일 생성 (재부팅 시 매개변수 유지용)
echo 'options binder_linux devices="binder,hwbinder,vndbinder"' | sudo tee /etc/modprobe.d/redroid.conf

yml파일 생성한 디렉토리에서
docker-compose up -d
docker compose up -d
둘중 하나 되는거로 실행

./iris_control install
./iris_control start
하고

http://안드로이드ip:3000/dashboard
안드로이드 안에서 접속
(172.18.0.2)

web_server_endpoint 항목을
http://백엔드ip:5000/db 로 수정
(http://192.168.45.188:5000/db)

curl http://안드로이드ip:3000/config 명령어로 수정 잘 됐는지 확인
{"bot_name":"Iris","bot_http_port":3000,"web_server_endpoint":"http://192.168.45.188:5000/db","db_polling_rate":100,"message_send_rate":50,"bot_id":310535236}root@leesh2347-Default-string:/home/leesh2347#

iris 백엔드 실행 후 작동확인